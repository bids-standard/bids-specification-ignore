
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magnetic Resonance Imaging &#8212; The Brain Imaging Data Standard</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../../_static/BIDS_logo.jpg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Magnetoencephalography" href="02-magnetoencephalography.html" />
    <link rel="prev" title="Modality specific files" href="../04-modality-specific-files.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/BIDS_logo.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">The Brain Imaging Data Standard</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   The Brain Imaging Data Structure
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The BIDS Specification
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../01-introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../02-common-principles.html">
   Common principles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03-modality-agnostic-files.html">
   Modality agnostic files
  </a>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../04-modality-specific-files.html">
   Modality specific files
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Magnetic Resonance Imaging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="02-magnetoencephalography.html">
     Magnetoencephalography
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="03-electroencephalography.html">
     Electroencephalography
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="04-intracranial-electroencephalography.html">
     Intracranial Electroencephalography
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="05-task-events.html">
     Task events
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="06-physiological-and-other-continuous-recordings.html">
     Physiological and other continuous recordings
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="07-behavioral-experiments.html">
     Behavioral experiments (with no neural recordings)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="08-genetic-descriptor.html">
     Genetic Descriptor
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="09-positron-emission-tomography.html">
     Positron Emission Tomography
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="10-microscopy.html">
     Microscopy
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05-derivatives.html">
   Derivatives
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-derivatives/01-introduction.html">
     BIDS Derivatives
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-derivatives/02-common-data-types.html">
     Common data types and metadata
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05-derivatives/03-imaging.html">
     Imaging data types
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06-longitudinal-and-multi-site-studies.html">
   Longitudinal and multi-site studies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../07-extensions.html">
   BIDS Extension Proposals
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../99-appendices.html">
   Appendices
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/01-contributors.html">
     Appendix I: Contributors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/02-licenses.html">
     Appendix II: Licenses
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/03-hed.html">
     Appendix III: Hierarchical Event Descriptors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/04-entity-table.html">
     Appendix IV: Entity table
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/05-units.html">
     Appendix V: Units
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/06-meg-file-formats.html">
     Appendix VI: MEG file formats
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/07-meg-systems.html">
     Appendix VII: MEG systems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/08-coordinate-systems.html">
     Appendix VIII: Coordinate systems
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/09-entities.html">
     Appendix IX: Entities
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/10-file-collections.html">
     Appendix X: File collections
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/11-qmri.html">
     Appendix XI: Quantitative MRI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/12-arterial-spin-labeling.html">
     Appendix XI: Arterial Spin Labeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/13-cross-modality-correspondence.html">
     Appendix XIII: Cross modality correspondence
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../99-appendices/14-glossary.html">
     Appendix XIV: Glossary of schema objects
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CHANGES.html">
   Changelog
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The BIDS Starter Kit
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://bids-standard.github.io/bids-starter-kit">
   Website
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://bids-standard.github.io/bids-starter-kit/tutorials/tutorials.html">
   Tutorials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/bids-standard/bids-starter-kit">
   GitHub repository
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../../_sources/src/04-modality-specific-files/01-magnetic-resonance-imaging-data.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/src/04-modality-specific-files/01-magnetic-resonance-imaging-data.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/bids-standard/bids-specification-ignore"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/bids-standard/bids-specification-ignore/issues/new?title=Issue%20on%20page%20%2Fsrc/04-modality-specific-files/01-magnetic-resonance-imaging-data.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/bids-standard/bids-specification-ignore/master?urlpath=tree/src/src/04-modality-specific-files/01-magnetic-resonance-imaging-data.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#common-metadata-fields">
   Common metadata fields
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scanner-hardware">
     Scanner Hardware
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sequence-specifics">
     Sequence Specifics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-plane-spatial-encoding">
     In-Plane Spatial Encoding
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#timing-parameters">
     Timing Parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rf-contrast">
     RF &amp; Contrast
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slice-acceleration">
     Slice Acceleration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#anatomical-landmarks">
     Anatomical landmarks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#echo-planar-imaging-and-b-sub-0-sub-mapping">
     Echo-Planar Imaging and
     <em>
      B
      <sub>
       0
      </sub>
     </em>
     mapping
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#institution-information">
     Institution information
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#anatomy-imaging-data">
   Anatomy imaging data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deprecated-suffixes">
     Deprecated suffixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#task-including-resting-state-imaging-data">
   Task (including resting state) imaging data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#required-fields">
     Required fields
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-recommended-metadata">
     Other RECOMMENDED metadata
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Timing Parameters
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fmri-task-information">
       fMRI task information
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#diffusion-imaging-data">
   Diffusion imaging data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#required-gradient-orientation-information">
     REQUIRED gradient orientation information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multipart-split-dwi-schemes">
     Multipart (split) DWI schemes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Other RECOMMENDED metadata
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arterial-spin-labeling-perfusion-data">
   Arterial Spin Labeling perfusion data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aslcontext-tsv">
     <code class="docutils literal notranslate">
      <span class="pre">
       *_aslcontext.tsv
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scaling">
     Scaling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#m0">
     M0
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#asl-json-file">
     <code class="docutils literal notranslate">
      <span class="pre">
       *_asl.json
      </span>
     </code>
     file
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#common-metadata-fields-applicable-to-both-p-casl-and-pasl">
       Common metadata fields applicable to both (P)CASL and PASL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#p-casl-specific-metadata-fields">
       (P)CASL-specific metadata fields
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pasl-specific-metadata-fields">
       PASL-specific metadata fields
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#m0scan-metadata-fields">
     <code class="docutils literal notranslate">
      <span class="pre">
       m0scan
      </span>
     </code>
     metadata fields
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fieldmap-data">
   Fieldmap data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#expressing-the-mr-protocol-intent-for-fieldmaps">
     Expressing the MR protocol intent for fieldmaps
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-b0fieldidentifier-metadata">
       Using
       <code class="docutils literal notranslate">
        <span class="pre">
         B0FieldIdentifier
        </span>
       </code>
       metadata
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-intendedfor-metadata">
       Using
       <code class="docutils literal notranslate">
        <span class="pre">
         IntendedFor
        </span>
       </code>
       metadata
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#types-of-fieldmaps">
     Types of fieldmaps
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-1-phase-difference-map-and-at-least-one-magnitude-image">
       Case 1: Phase-difference map and at least one magnitude image
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-2-two-phase-maps-and-two-magnitude-images">
       Case 2: Two phase maps and two magnitude images
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-3-direct-field-mapping">
       Case 3: Direct
       <em>
        field mapping
       </em>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-4-multiple-phase-encoded-directions-pepolar">
       Case 4: Multiple phase encoded directions (“pepolar”)
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Magnetic Resonance Imaging</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#common-metadata-fields">
   Common metadata fields
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scanner-hardware">
     Scanner Hardware
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sequence-specifics">
     Sequence Specifics
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-plane-spatial-encoding">
     In-Plane Spatial Encoding
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#timing-parameters">
     Timing Parameters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rf-contrast">
     RF &amp; Contrast
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#slice-acceleration">
     Slice Acceleration
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#anatomical-landmarks">
     Anatomical landmarks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#echo-planar-imaging-and-b-sub-0-sub-mapping">
     Echo-Planar Imaging and
     <em>
      B
      <sub>
       0
      </sub>
     </em>
     mapping
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#institution-information">
     Institution information
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#anatomy-imaging-data">
   Anatomy imaging data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deprecated-suffixes">
     Deprecated suffixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#task-including-resting-state-imaging-data">
   Task (including resting state) imaging data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#required-fields">
     Required fields
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-recommended-metadata">
     Other RECOMMENDED metadata
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id1">
       Timing Parameters
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#fmri-task-information">
       fMRI task information
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#diffusion-imaging-data">
   Diffusion imaging data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#required-gradient-orientation-information">
     REQUIRED gradient orientation information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#multipart-split-dwi-schemes">
     Multipart (split) DWI schemes
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Other RECOMMENDED metadata
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#arterial-spin-labeling-perfusion-data">
   Arterial Spin Labeling perfusion data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aslcontext-tsv">
     <code class="docutils literal notranslate">
      <span class="pre">
       *_aslcontext.tsv
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#scaling">
     Scaling
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#m0">
     M0
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#asl-json-file">
     <code class="docutils literal notranslate">
      <span class="pre">
       *_asl.json
      </span>
     </code>
     file
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#common-metadata-fields-applicable-to-both-p-casl-and-pasl">
       Common metadata fields applicable to both (P)CASL and PASL
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#p-casl-specific-metadata-fields">
       (P)CASL-specific metadata fields
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#pasl-specific-metadata-fields">
       PASL-specific metadata fields
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#m0scan-metadata-fields">
     <code class="docutils literal notranslate">
      <span class="pre">
       m0scan
      </span>
     </code>
     metadata fields
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fieldmap-data">
   Fieldmap data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#expressing-the-mr-protocol-intent-for-fieldmaps">
     Expressing the MR protocol intent for fieldmaps
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-b0fieldidentifier-metadata">
       Using
       <code class="docutils literal notranslate">
        <span class="pre">
         B0FieldIdentifier
        </span>
       </code>
       metadata
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#using-intendedfor-metadata">
       Using
       <code class="docutils literal notranslate">
        <span class="pre">
         IntendedFor
        </span>
       </code>
       metadata
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#types-of-fieldmaps">
     Types of fieldmaps
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-1-phase-difference-map-and-at-least-one-magnitude-image">
       Case 1: Phase-difference map and at least one magnitude image
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-2-two-phase-maps-and-two-magnitude-images">
       Case 2: Two phase maps and two magnitude images
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-3-direct-field-mapping">
       Case 3: Direct
       <em>
        field mapping
       </em>
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#case-4-multiple-phase-encoded-directions-pepolar">
       Case 4: Multiple phase encoded directions (“pepolar”)
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="magnetic-resonance-imaging">
<h1>Magnetic Resonance Imaging<a class="headerlink" href="#magnetic-resonance-imaging" title="Permalink to this headline">¶</a></h1>
<div class="section" id="common-metadata-fields">
<h2>Common metadata fields<a class="headerlink" href="#common-metadata-fields" title="Permalink to this headline">¶</a></h2>
<p>MR Data described in the following sections share the following RECOMMENDED metadata
fields (stored in sidecar JSON files).
MRI acquisition parameters are divided into several categories based on
“A checklist for fMRI acquisition methods reporting in the literature”
(<a class="reference external" href="https://winnower-production.s3.amazonaws.com/papers/977/v4/pdf/977-a-checklist-for-fmri-acquisition-methods-reporting-in-the-literature.pdf">article</a>,
<a class="reference external" href="https://winnower-production.s3.amazonaws.com/papers/977/assets/993e199d-6bc3-4418-be3a-f620af1188b7-Parameter_Reporting_V1p3.pdf">checklist</a>)
by Ben Inglis.</p>
<div class="section" id="scanner-hardware">
<h3>Scanner Hardware<a class="headerlink" href="#scanner-hardware" title="Permalink to this headline">¶</a></h3>
<p></p>
<p>Example for <code class="docutils literal notranslate"><span class="pre">ReceiveCoilActiveElements</span></code>:</p>
<p>For Siemens, coil channels are typically not activated/selected individually,
but rather in pre-defined selectable “groups” of individual channels,
and the list of the “groups” of elements that are active/selected in any
given scan populates the <code class="docutils literal notranslate"><span class="pre">Coil</span> <span class="pre">String</span></code> entry in Siemens’ private DICOM fields
(for example, <code class="docutils literal notranslate"><span class="pre">HEA;HEP</span></code> for the Siemens standard 32 ch coil
when both the anterior and posterior groups are activated).
This is a flexible field that can be used as most appropriate for a given
vendor and coil to define the “active” coil elements.
Since individual scans can sometimes not have the intended coil elements selected,
it is preferable for this field to be populated directly from the DICOM
for each individual scan, so that it can be used as a mechanism for checking
that a given scan was collected with the intended coil elements selected</p>
</div>
<div class="section" id="sequence-specifics">
<h3>Sequence Specifics<a class="headerlink" href="#sequence-specifics" title="Permalink to this headline">¶</a></h3>
<p></p>
</div>
<div class="section" id="in-plane-spatial-encoding">
<h3>In-Plane Spatial Encoding<a class="headerlink" href="#in-plane-spatial-encoding" title="Permalink to this headline">¶</a></h3>
<p></p>
<p><sup>2</sup>Conveniently, for Siemens data, this value is easily obtained as
<code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">/</span> <span class="pre">(BWPPPE</span> <span class="pre">*</span> <span class="pre">ReconMatrixPE)</span></code>, where BWPPPE is the
“BandwidthPerPixelPhaseEncode” in DICOM Tag 0019, 1028 and ReconMatrixPE is
the size of the actual reconstructed data in the phase direction (which is NOT
reflected in a single DICOM Tag for all possible aforementioned scan
manipulations). See <a class="reference external" href="https://lcni.uoregon.edu/kb-articles/kb-0003">here</a> and
<a class="reference external" href="https://github.com/neurolabusc/dcm_qa/tree/master/In/TotalReadoutTime">here</a></p>
<p><sup>3</sup>We use the time between the center of the first “effective” echo
and the center of the last “effective” echo, sometimes called the “FSL definition”.</p>
</div>
<div class="section" id="timing-parameters">
<h3>Timing Parameters<a class="headerlink" href="#timing-parameters" title="Permalink to this headline">¶</a></h3>
<p></p>
</div>
<div class="section" id="rf-contrast">
<h3>RF &amp; Contrast<a class="headerlink" href="#rf-contrast" title="Permalink to this headline">¶</a></h3>
<p></p>
</div>
<div class="section" id="slice-acceleration">
<h3>Slice Acceleration<a class="headerlink" href="#slice-acceleration" title="Permalink to this headline">¶</a></h3>
<p></p>
</div>
<div class="section" id="anatomical-landmarks">
<h3>Anatomical landmarks<a class="headerlink" href="#anatomical-landmarks" title="Permalink to this headline">¶</a></h3>
<p>Useful for multimodal co-registration with MEG, (S)EEG, TMS, and so on.</p>
<p></p>
</div>
<div class="section" id="echo-planar-imaging-and-b-sub-0-sub-mapping">
<h3>Echo-Planar Imaging and <em>B<sub>0</sub></em> mapping<a class="headerlink" href="#echo-planar-imaging-and-b-sub-0-sub-mapping" title="Permalink to this headline">¶</a></h3>
<p>Echo-Planar Imaging (EPI) schemes typically used in the acquisition of
diffusion and functional MRI may also be <em>intended for</em> estimating the
<em>B<sub>0</sub></em> field nonuniformity inside the scanner (in other words,
<em>mapping the field</em>) without the acquisition of additional MRI schemes
such as gradient-recalled echo (GRE) sequences that are stored under the
<code class="docutils literal notranslate"><span class="pre">fmap/</span></code> directory of the BIDS structure.</p>
<p>The modality labels <code class="docutils literal notranslate"><span class="pre">dwi</span></code> (under <code class="docutils literal notranslate"><span class="pre">dwi/</span></code>), <code class="docutils literal notranslate"><span class="pre">bold</span></code> (under <code class="docutils literal notranslate"><span class="pre">func/</span></code>),
<code class="docutils literal notranslate"><span class="pre">asl</span></code> (under <code class="docutils literal notranslate"><span class="pre">perf/</span></code>), <code class="docutils literal notranslate"><span class="pre">sbref</span></code> (under <code class="docutils literal notranslate"><span class="pre">dwi/</span></code>, <code class="docutils literal notranslate"><span class="pre">func/</span></code> or <code class="docutils literal notranslate"><span class="pre">perf/</span></code>), and
any modality under <code class="docutils literal notranslate"><span class="pre">fmap/</span></code> are allowed to encode the MR protocol intent for
fieldmap estimation using the following metadata:</p>
<p></p>
</div>
<div class="section" id="institution-information">
<h3>Institution information<a class="headerlink" href="#institution-information" title="Permalink to this headline">¶</a></h3>
<p></p>
<p>When adding additional metadata please use the CamelCase version of
<a class="reference external" href="https://scicrunch.org/scicrunch/interlex/dashboard">DICOM ontology terms</a>
whenever possible. See also
<a class="reference external" href="../02-common-principles.md#keyvalue-files-dictionaries">recommendations on JSON files</a>.</p>
</div>
</div>
<div class="section" id="anatomy-imaging-data">
<h2>Anatomy imaging data<a class="headerlink" href="#anatomy-imaging-data" title="Permalink to this headline">¶</a></h2>
<p>Currently supported non-parametric structural MR images include:</p>
<p></p>
<p>If the structural images included in the dataset were defaced (to protect
identity of participants) one MAY provide the binary mask that was used to
remove facial features in the form of <code class="docutils literal notranslate"><span class="pre">_defacemask</span></code> files.
In such cases,  the OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#mod"><code class="docutils literal notranslate"><span class="pre">mod-&lt;label&gt;</span></code></a>
key/value pair corresponds to modality suffix,
such as T1w or inplaneT1, referenced by the defacemask image.
For example, <code class="docutils literal notranslate"><span class="pre">sub-01_mod-T1w_defacemask.nii.gz</span></code>.</p>
<p>If several scans with the same acquisition parameters are acquired in the same session,
they MUST be indexed with the <a class="reference external" href="../99-appendices/09-entities.md#run"><code class="docutils literal notranslate"><span class="pre">run-&lt;index&gt;</span></code></a> entity:
<code class="docutils literal notranslate"><span class="pre">_run-1</span></code>, <code class="docutils literal notranslate"><span class="pre">_run-2</span></code>, <code class="docutils literal notranslate"><span class="pre">_run-3</span></code>, and so on (only nonnegative integers are allowed as
run labels).</p>
<p>If different entities apply,
such as a different session indicated by <a class="reference external" href="../99-appendices/09-entities.md#ses"><code class="docutils literal notranslate"><span class="pre">ses-&lt;label&gt;</span></code></a>,
or different acquisition parameters indicated by
<a class="reference external" href="../99-appendices/09-entities.md#acq"><code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code></a>,
then <code class="docutils literal notranslate"><span class="pre">run</span></code> is not needed to distinguish the scans and MAY be omitted.</p>
<p>The OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#acq"><code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code></a>
key/value pair corresponds to a custom label the user
MAY use to distinguish a different set of parameters used for acquiring the same
modality. For example this should be used when a study includes two T1w images -
one full brain low resolution and one restricted field of view but high
resolution. In such case two files could have the following names:
<code class="docutils literal notranslate"><span class="pre">sub-01_acq-highres_T1w.nii.gz</span></code> and <code class="docutils literal notranslate"><span class="pre">sub-01_acq-lowres_T1w.nii.gz</span></code>, however the
user is free to choose any other label than <code class="docutils literal notranslate"><span class="pre">highres</span></code> and <code class="docutils literal notranslate"><span class="pre">lowres</span></code> as long as
they are consistent across subjects and sessions. In case different sequences
are used to record the same modality (for example, RARE and FLASH for T1w) this field
can also be used to make that distinction. At what level of detail to make the
distinction (for example, just between RARE and FLASH, or between RARE, FLASH, and
FLASHsubsampled) remains at the discretion of the researcher.</p>
<p>Similarly the OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#ce"><code class="docutils literal notranslate"><span class="pre">ce-&lt;label&gt;</span></code></a>
key/value can be used to distinguish
sequences using different contrast enhanced images. The label is the name of the
contrast agent. The key <code class="docutils literal notranslate"><span class="pre">ContrastBolusIngredient</span></code> MAY be also be added in the
JSON file, with the same label.</p>
<p>Some meta information about the acquisition MAY be provided in an additional
JSON file. See <a class="reference external" href="#common-metadata-fields">Common metadata fields</a> for a
list of terms and their definitions. There are also some OPTIONAL JSON
fields specific to anatomical scans:</p>
<p></p>
<p>The <a class="reference external" href="../99-appendices/09-entities.md#part"><code class="docutils literal notranslate"><span class="pre">part-&lt;label&gt;</span></code></a> key/value pair is
used to indicate which component of the complex representation of the MRI
signal is represented in voxel data.
This entity is associated with the DICOM Tag <code class="docutils literal notranslate"><span class="pre">0008,</span> <span class="pre">9208</span></code>.
Allowed label values for this entity are <code class="docutils literal notranslate"><span class="pre">phase</span></code>, <code class="docutils literal notranslate"><span class="pre">mag</span></code>, <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">imag</span></code>,
which are typically used in <code class="docutils literal notranslate"><span class="pre">part-mag</span></code>/<code class="docutils literal notranslate"><span class="pre">part-phase</span></code> or <code class="docutils literal notranslate"><span class="pre">part-real</span></code>/<code class="docutils literal notranslate"><span class="pre">part-imag</span></code>
pairs of files.
For example:</p>
<p></p>
<p>Phase images MAY be in radians or in arbitrary units.
The sidecar JSON file MUST include the units of the <code class="docutils literal notranslate"><span class="pre">phase</span></code> image.
The possible options are <code class="docutils literal notranslate"><span class="pre">rad</span></code> or <code class="docutils literal notranslate"><span class="pre">arbitrary</span></code>.</p>
<p>For example, for <code class="docutils literal notranslate"><span class="pre">sub-01_part-phase_T1w.json</span></code>:</p>
<div class="highlight-Text notranslate"><div class="highlight"><pre><span></span>{
   &quot;Units&quot;: &quot;rad&quot;
}
</pre></div>
</div>
<p>When there is only a magnitude image of a given type, the <code class="docutils literal notranslate"><span class="pre">part</span></code> key MAY be omitted.</p>
<p>Similarly, the OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#rec"><code class="docutils literal notranslate"><span class="pre">rec-&lt;label&gt;</span></code></a>
key/value can be used to distinguish
different reconstruction algorithms (for example ones using motion correction).</p>
<p>Structural MR images whose intensity is represented in a non-arbitrary scale
constitute parametric maps. Currently supported parametric maps include:</p>
<p></p>
<p>Parametric images listed in the table above are typically generated by
processing a <a class="reference external" href="../02-common-principles.md#entity-linked-file-collections">file collection</a>.
Please visit the <a class="reference internal" href="../99-appendices/10-file-collections.html"><span class="doc std std-doc">file collections appendix</span></a> to see the
list of suffixes available for quantitative MRI (qMRI) applications associated
with these maps.
For any other details on the organization of parametric maps, their
recommended metadata fields, and the application specific entity or
metadata requirement levels of <a class="reference internal" href="../99-appendices/10-file-collections.html"><span class="doc std std-doc">file collections</span></a> that can generate
them, visit the <a class="reference internal" href="../99-appendices/11-qmri.html"><span class="doc std std-doc">qMRI appendix</span></a>.</p>
<div class="section" id="deprecated-suffixes">
<h3>Deprecated suffixes<a class="headerlink" href="#deprecated-suffixes" title="Permalink to this headline">¶</a></h3>
<p>Some suffixes that were available in versions of the specification prior to
1.5.0 have been deprecated.
These suffixes are ambiguous and have been superseded by more precise conventions.
Therefore, they are not recommended for use in new datasets.
They are, however, still valid suffixes, to maintain backwards compatibility.</p>
<p>The following suffixes are valid, but SHOULD NOT be used for new BIDS compatible
datasets (created after version 1.5.0.):</p>
<p></p>
</div>
</div>
<div class="section" id="task-including-resting-state-imaging-data">
<h2>Task (including resting state) imaging data<a class="headerlink" href="#task-including-resting-state-imaging-data" title="Permalink to this headline">¶</a></h2>
<p>Currently supported image contrasts include:</p>
<p></p>
<p>Functional imaging consists of techniques that support rapid temporal repetition.
This includes but is not limited to task based fMRI
as well as resting state fMRI, which is treated like any other task. For task
based fMRI a corresponding task events file (see below) MUST be provided
(please note that this file is not necessary for resting state scans). For
multiband acquisitions, one MAY also save the single-band reference image as
type <code class="docutils literal notranslate"><span class="pre">sbref</span></code> (for example, <code class="docutils literal notranslate"><span class="pre">sub-control01_task-nback_sbref.nii.gz</span></code>).</p>
<p>Each task has a unique label that MUST only consist of letters and/or numbers
(other characters, including spaces and underscores, are not allowed) with the
<a class="reference external" href="../99-appendices/09-entities.md#task"><code class="docutils literal notranslate"><span class="pre">task-&lt;label&gt;</span></code></a> key/value pair.
Those labels MUST be consistent across subjects and sessions.</p>
<p>If more than one run of the same task has been acquired the
<a class="reference external" href="../99-appendices/09-entities.md#run"><code class="docutils literal notranslate"><span class="pre">run-&lt;index&gt;</span></code></a> key/value pair MUST be used:
<code class="docutils literal notranslate"><span class="pre">_run-1</span></code>, <code class="docutils literal notranslate"><span class="pre">_run-2</span></code>, <code class="docutils literal notranslate"><span class="pre">_run-3</span></code>, and so on. If only one run was acquired the
<code class="docutils literal notranslate"><span class="pre">run-&lt;index&gt;</span></code> can be omitted. In the context of functional imaging a run is
defined as the same task, but in some cases it can mean different set of stimuli
(for example randomized order) and participant responses.</p>
<p>The OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#acq"><code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code></a>
key/value pair corresponds to a custom label one may
use to distinguish different set of parameters used for acquiring the same task.
For example this should be used when a study includes two resting state images -
one single band and one multiband. In such case two files could have the
following names: <code class="docutils literal notranslate"><span class="pre">sub-01_task-rest_acq-singleband_bold.nii.gz</span></code> and
<code class="docutils literal notranslate"><span class="pre">sub-01_task-rest_acq-multiband_bold.nii.gz</span></code>, however the user is MAY choose any
other label than <code class="docutils literal notranslate"><span class="pre">singleband</span></code> and <code class="docutils literal notranslate"><span class="pre">multiband</span></code> as long as they are consistent
across subjects and sessions and consist only of the legal label characters.</p>
<p>Similarly the OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#ce"><code class="docutils literal notranslate"><span class="pre">ce-&lt;label&gt;</span></code></a>
key/value can be used to distinguish
sequences using different contrast enhanced images. The label is the name of the
contrast agent. The key ContrastBolusIngredient MAY be also be added in the JSON
file, with the same label.</p>
<p>Similarly the OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#rec"><code class="docutils literal notranslate"><span class="pre">rec-&lt;label&gt;</span></code></a>
key/value can be used to distinguish
different reconstruction algorithms (for example ones using motion correction).</p>
<p>Similarly the OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#dir"><code class="docutils literal notranslate"><span class="pre">dir-&lt;label&gt;</span></code></a>
and <a class="reference external" href="../99-appendices/09-entities.md#rec"><code class="docutils literal notranslate"><span class="pre">rec-&lt;label&gt;</span></code></a> key/values
can be used to distinguish different phase-encoding directions and
reconstruction algorithms (for example ones using motion correction).
See <a class="reference external" href="01-magnetic-resonance-imaging-data.md#case-4-multiple-phase-encoded-directions-pepolar"><code class="docutils literal notranslate"><span class="pre">fmap</span></code> Case 4</a>
for more information on <code class="docutils literal notranslate"><span class="pre">dir</span></code> field specification.</p>
<p>Multi-echo data MUST be split into one file per echo using the
<a class="reference external" href="../99-appendices/09-entities.md#echo"><code class="docutils literal notranslate"><span class="pre">echo-&lt;index&gt;</span></code></a> key-value pair. For example:</p>
<p></p>
<p>Please note that the <code class="docutils literal notranslate"><span class="pre">&lt;index&gt;</span></code> denotes the number/index (in the form of a
nonnegative integer) of the echo not the echo time value which needs to be stored in the
field EchoTime of the separate JSON file.</p>
<p>Complex-valued data MUST be split into one file for each data type.
For BOLD data, there are separate suffixes for magnitude (<code class="docutils literal notranslate"><span class="pre">_bold</span></code>) and phase
(<code class="docutils literal notranslate"><span class="pre">_phase</span></code>) data, but the <code class="docutils literal notranslate"><span class="pre">_phase</span></code> suffix is <a class="reference external" href="../02-common-principles.md#definitions">deprecated</a>.
Newly generated datasets SHOULD NOT use the <code class="docutils literal notranslate"><span class="pre">_phase</span></code> suffix, and the suffix will be removed
from the specification in the next major release.
For backwards compatibility, <code class="docutils literal notranslate"><span class="pre">_phase</span></code> is considered equivalent to <code class="docutils literal notranslate"><span class="pre">_part-phase_bold</span></code>.
When the <code class="docutils literal notranslate"><span class="pre">_phase</span></code> suffix is not used, each file shares the same
name with the exception of the <code class="docutils literal notranslate"><span class="pre">part-&lt;mag|phase&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">part-&lt;real|imag&gt;</span></code> key/value.</p>
<p>For example:</p>
<p></p>
<p>Some meta information about the acquisition MUST be provided in an additional
JSON file.</p>
<div class="section" id="required-fields">
<h3>Required fields<a class="headerlink" href="#required-fields" title="Permalink to this headline">¶</a></h3>
<p></p>
<p>For the fields described above and in the following section, the term “Volume”
refers to a reconstruction of the object being imaged (for example, brain or part of a
brain). In case of multiple channels in a coil, the term “Volume” refers to a
combined image rather than an image from each coil.</p>
</div>
<div class="section" id="other-recommended-metadata">
<h3>Other RECOMMENDED metadata<a class="headerlink" href="#other-recommended-metadata" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id1">
<h4>Timing Parameters<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p></p>
<p>The following table recapitulates the different ways that specific fields have
to be populated for functional sequences. Note that all these options can be
used for non sparse sequences but that only options B, D and E are valid for
sparse sequences.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p><strong><code class="docutils literal notranslate"><span class="pre">RepetitionTime</span></code></strong></p></th>
<th class="head"><p><strong><code class="docutils literal notranslate"><span class="pre">SliceTiming</span></code></strong></p></th>
<th class="head"><p><strong><code class="docutils literal notranslate"><span class="pre">AcquisitionDuration</span></code></strong></p></th>
<th class="head"><p><strong><code class="docutils literal notranslate"><span class="pre">DelayTime</span></code></strong></p></th>
<th class="head"><p><strong><code class="docutils literal notranslate"><span class="pre">VolumeTiming</span></code></strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>option A</p></td>
<td><p>[ X ]</p></td>
<td><p></p></td>
<td><p>[ ]</p></td>
<td><p></p></td>
<td><p>[ ]</p></td>
</tr>
<tr class="row-odd"><td><p>option B</p></td>
<td><p>[ ]</p></td>
<td><p>[ X ]</p></td>
<td><p></p></td>
<td><p>[ ]</p></td>
<td><p>[ X ]</p></td>
</tr>
<tr class="row-even"><td><p>option C</p></td>
<td><p>[ ]</p></td>
<td><p></p></td>
<td><p>[ X ]</p></td>
<td><p>[ ]</p></td>
<td><p>[ X ]</p></td>
</tr>
<tr class="row-odd"><td><p>option D</p></td>
<td><p>[ X ]</p></td>
<td><p>[ X ]</p></td>
<td><p>[ ]</p></td>
<td><p></p></td>
<td><p>[ ]</p></td>
</tr>
<tr class="row-even"><td><p>option E</p></td>
<td><p>[ X ]</p></td>
<td><p></p></td>
<td><p>[ ]</p></td>
<td><p>[ X ]</p></td>
<td><p>[ ]</p></td>
</tr>
</tbody>
</table>
<p><strong>Legend</strong></p>
<ul class="simple">
<li><p>[ X ] –&gt; MUST be defined</p></li>
<li><p>[  ] –&gt; MUST NOT be defined</p></li>
<li><p>empty cell –&gt; MAY be specified</p></li>
</ul>
</div>
<div class="section" id="fmri-task-information">
<h4>fMRI task information<a class="headerlink" href="#fmri-task-information" title="Permalink to this headline">¶</a></h4>
<p></p>
<p>See <a class="reference external" href="#common-metadata-fields">Common metadata fields</a> for a list of
additional terms and their definitions.</p>
<p>Example:</p>
<p></p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;TaskName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;N Back&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;RepetitionTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;EchoTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;FlipAngle&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">78</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;SliceTiming&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">],</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;MultibandAccelerationFactor&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;ParallelReductionFactorInPlane&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;PhaseEncodingDirection&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;j&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;InstitutionName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Stanford University&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;InstitutionAddress&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;450 Serra Mall, Stanford, CA 94305-2004, USA&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;DeviceSerialNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;11035&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;B0FieldSource&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;phasediff_fmap0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pepolar_fmap0&quot;</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>If this information is the same for all participants, sessions and runs it can
be provided in <code class="docutils literal notranslate"><span class="pre">task-&lt;label&gt;_bold.json</span></code> (in the root directory of the
dataset). However, if the information differs between subjects/runs it can be
specified in the
<code class="docutils literal notranslate"><span class="pre">sub-&lt;label&gt;/func/sub-&lt;label&gt;_task-&lt;label&gt;[_acq-&lt;label&gt;][_run-&lt;index&gt;]_bold.json</span></code> file.
If both files are specified fields from the file corresponding to a particular
participant, task and run takes precedence.</p>
</div>
</div>
</div>
<div class="section" id="diffusion-imaging-data">
<h2>Diffusion imaging data<a class="headerlink" href="#diffusion-imaging-data" title="Permalink to this headline">¶</a></h2>
<p>Several <a class="reference external" href="https://github.com/bids-standard/bids-examples">example datasets</a>
contain diffusion imaging data formatted using this specification
and that can be used for practical guidance when curating a new dataset:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/genetics_ukbb"><code class="docutils literal notranslate"><span class="pre">genetics_ukbb</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/eeg_rest_fmri"><code class="docutils literal notranslate"><span class="pre">eeg_rest_fmri</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/ds114"><code class="docutils literal notranslate"><span class="pre">ds114</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/ds000117"><code class="docutils literal notranslate"><span class="pre">ds000117</span></code></a></p></li>
</ul>
<p>Diffusion-weighted imaging data acquired for a participant.
Currently supported image types include:</p>
<p></p>
<p>If more than one run of the same acquisition and direction has been acquired, the
<a class="reference external" href="../99-appendices/09-entities.md#run"><code class="docutils literal notranslate"><span class="pre">run-&lt;index&gt;</span></code></a> key/value pair MUST be used:
<code class="docutils literal notranslate"><span class="pre">_run-1</span></code>, <code class="docutils literal notranslate"><span class="pre">_run-2</span></code>, <code class="docutils literal notranslate"><span class="pre">_run-3</span></code> (and so forth.)
When there is only one scan of a given acquisition and direction, the run key MAY be
omitted.
The <a class="reference external" href="../99-appendices/09-entities.md#run"><code class="docutils literal notranslate"><span class="pre">run-&lt;index&gt;</span></code></a> key/value pair is RECOMMENDED
to encode the splits of multipart DWI scans (see <a class="reference external" href="#multipart-split-dwi-schemes">below</a>.)</p>
<p>The OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#acq"><code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code></a>
key/value pair corresponds to a custom label the user may use to
distinguish different sets of parameters.</p>
<p>The OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#dir"><code class="docutils literal notranslate"><span class="pre">dir-&lt;label&gt;</span></code></a>
key/value pair corresponds to a custom label the user may use to
distinguish different sets of phase-encoding directions.</p>
<p><strong>Combining multi- and single-band acquisitions</strong>.
The single-band reference image MAY be stored with suffix <code class="docutils literal notranslate"><span class="pre">sbref</span></code> (for example,
<code class="docutils literal notranslate"><span class="pre">dwi/sub-control01_sbref.nii[.gz]</span></code>) as long as the image has no corresponding
<a class="reference external" href="#required-gradient-orientation-information">gradient information (<code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> and <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> sidecar files)</a>
to be stored.</p>
<p>Otherwise, if some gradient information is associated to the single-band diffusion
image and a multi-band diffusion image also exists, the <code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code> key/value pair
MUST be used to distinguish both images.
In such a case, two files could have the following names:
<code class="docutils literal notranslate"><span class="pre">sub-01_acq-singleband_dwi.nii.gz</span></code> and <code class="docutils literal notranslate"><span class="pre">sub-01_acq-multiband_dwi.nii.gz</span></code>.
The user is free to choose any other label than <code class="docutils literal notranslate"><span class="pre">singleband</span></code> and
<code class="docutils literal notranslate"><span class="pre">multiband</span></code>, as long as they are consistent across subjects and sessions.</p>
<div class="section" id="required-gradient-orientation-information">
<h3>REQUIRED gradient orientation information<a class="headerlink" href="#required-gradient-orientation-information" title="Permalink to this headline">¶</a></h3>
<p>The REQUIRED gradient orientation information corresponding to a DWI acquisition
MUST be stored using <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> and <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> pairs of files.
The <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> and <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> files MAY be saved on any level of the directory structure
and thus define those values for all sessions and/or subjects in one place (see
<a class="reference external" href="../02-common-principles.md#the-inheritance-principle">the inheritance principle</a>).</p>
<p>As an exception to the <a class="reference external" href="../02-common-principles.md#definitions">common principles</a>
that parameters are constant across runs, the gradient table information (stored
within the <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> and <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> files) MAY change across DWI runs.</p>
<p><strong>Gradient orientation file formats</strong>.
The <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> and <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> files MUST follow the
<a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FDT/UserGuide#DTIFIT">FSL format</a>:
The <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> file contains 3 rows with <em>N</em> space-delimited floating-point numbers
(corresponding to the <em>N</em> volumes in the corresponding NIfTI file.)
The first row contains the <em>x</em> elements, the second row contains the <em>y</em> elements and
the third row contains the <em>z</em> elements of a unit vector in the direction of the applied
diffusion gradient, where the <em>i</em>-th elements in each row correspond together to
the <em>i</em>-th volume, with <code class="docutils literal notranslate"><span class="pre">[0,0,0]</span></code> for <em>non-diffusion-weighted</em> (also called <em>b</em>=0 or <em>low-b</em>)
volumes.
Following the FSL format for the <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> specification, the coordinate system of
the <em>b</em> vectors MUST be defined with respect to the coordinate system defined by
the header of the corresponding <code class="docutils literal notranslate"><span class="pre">_dwi</span></code> NIfTI file and not the scanner’s device
coordinate system (see <a class="reference internal" href="../99-appendices/08-coordinate-systems.html"><span class="doc std std-doc">Coordinate systems</span></a>).
The most relevant limitation imposed by this choice is that the gradient information cannot
be directly stored in this format if the scanner generates <em>b</em>-vectors in <em>scanner coordinates</em>.</p>
<p>Example of <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> file, with <em>N</em>=6, with two <em>b</em>=0 volumes in the beginning:</p>
<div class="highlight-Text notranslate"><div class="highlight"><pre><span></span>0 0 0.021828 -0.015425 -0.70918 -0.2465
0 0 0.80242 0.22098 -0.00063106 0.1043
0 0 -0.59636 0.97516 -0.70503 -0.96351
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> file contains the <em>b</em>-values (in s/mm<sup>2</sup>) corresponding to the
volumes in the relevant NIfTI file), with 0 designating <em>b</em>=0 volumes, space-delimited.</p>
<p>Example of <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bval</span></code> file, corresponding to the previous <code class="docutils literal notranslate"><span class="pre">[*_]dwi.bvec</span></code> example:</p>
<div class="highlight-Text notranslate"><div class="highlight"><pre><span></span>0 0 2000 2000 1000 1000
</pre></div>
</div>
</div>
<div class="section" id="multipart-split-dwi-schemes">
<h3>Multipart (split) DWI schemes<a class="headerlink" href="#multipart-split-dwi-schemes" title="Permalink to this headline">¶</a></h3>
<p>Some MR schemes cannot be acquired directly by some scanner devices,
requiring to generate several DWI runs that were originally meant to belong
in a single one.
For instance, some GE scanners cannot collect more than ≈160 volumes
in a single run under fast-changing gradients, so acquiring <em>HCP-style</em>
diffusion images will require splitting the DWI scheme in several runs.
Because researchers will generally optimize the data splits, these will likely
not be able to be directly concatenated.
BIDS permits defining arbitrary groupings of these multipart scans with the
following metadata:</p>
<p></p>
<p>JSON example:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;MultipartID&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dwi_1&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>For instance, if there are two phase-encoding directions (<code class="docutils literal notranslate"><span class="pre">AP</span></code>, <code class="docutils literal notranslate"><span class="pre">PA</span></code>), and
two runs each, and the intent of the researcher is that all of them are
part of a unique multipart scan, then they will tag all four runs with the
same <code class="docutils literal notranslate"><span class="pre">MultipartID</span></code> (shown at the right-hand side of the file listing):</p>
<p></p>
<p>If, conversely, the researcher wanted to store two multipart scans, one possibility
is to combine matching phase-encoding directions:</p>
<p></p>
<p>Alternatively, the researcher’s intent could be combining opposed phase-encoding
runs instead:</p>
<p></p>
<p>The <code class="docutils literal notranslate"><span class="pre">MultipartID</span></code> metadata MAY be used with the
<a class="reference external" href="../99-appendices/09-entities.md#acq"><code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code></a> key/value pair, for example:</p>
<p></p>
</div>
<div class="section" id="id2">
<h3>Other RECOMMENDED metadata<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">PhaseEncodingDirection</span></code> and <code class="docutils literal notranslate"><span class="pre">TotalReadoutTime</span></code> metadata
fields are RECOMMENDED to enable the correction of geometrical distortions
with <a class="reference external" href="#fieldmap-data">fieldmap information</a>.
See <a class="reference external" href="#common-metadata-fields">Common metadata fields</a> for a list of
additional terms that can be included in the corresponding JSON file.</p>
<p>JSON example:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;PhaseEncodingDirection&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;j-&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;TotalReadoutTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.095</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;B0FieldSource&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;phasediff_fmap0&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pepolar_fmap0&quot;</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="arterial-spin-labeling-perfusion-data">
<h2>Arterial Spin Labeling perfusion data<a class="headerlink" href="#arterial-spin-labeling-perfusion-data" title="Permalink to this headline">¶</a></h2>
<p>Several <a class="reference external" href="https://github.com/bids-standard/bids-examples#asl-datasets">example ASL datasets</a>
have been formatted using this specification
and can be used for practical guidance when curating a new dataset.</p>
<p>The complete ASL time series should be stored as a 4D NIfTI file in the original acquisition order,
accompanied by two ancillary files: <code class="docutils literal notranslate"><span class="pre">*_asl.json</span></code> and <code class="docutils literal notranslate"><span class="pre">*_aslcontext.tsv</span></code>.</p>
<div class="section" id="aslcontext-tsv">
<h3><code class="docutils literal notranslate"><span class="pre">*_aslcontext.tsv</span></code><a class="headerlink" href="#aslcontext-tsv" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">*_aslcontext.tsv</span></code> table consists of a single column of labels identifying the
<code class="docutils literal notranslate"><span class="pre">volume_type</span></code> of each volume in the corresponding <code class="docutils literal notranslate"><span class="pre">*_asl.nii[.gz]</span></code> file.
Volume types are defined in the following table, based on DICOM Tag 0018, 9257 <code class="docutils literal notranslate"><span class="pre">ASL</span> <span class="pre">Context</span></code>.
Note that the volume_types <code class="docutils literal notranslate"><span class="pre">control</span></code> and  <code class="docutils literal notranslate"><span class="pre">label</span></code> within BIDS only serve
to specify the magnetization state of the blood and thus the ASL subtraction order.
See <a class="reference external" href="../99-appendices/12-arterial-spin-labeling.md#which-image-is-control-and-which-is-label">Appendix XII - ASL</a> for more information on <code class="docutils literal notranslate"><span class="pre">control</span></code> and  <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>volume_type</strong></p></th>
<th class="head"><p><strong>Definition</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>control</p></td>
<td><p>The control image is acquired in the exact same way as the label image, except that the magnetization of the blood flowing into the imaging region has not been inverted.</p></td>
</tr>
<tr class="row-odd"><td><p>label</p></td>
<td><p>The label image is acquired in the exact same way as the control image, except that the blood magnetization flowing into the imaging region has been inverted.</p></td>
</tr>
<tr class="row-even"><td><p>m0scan</p></td>
<td><p>The M0 image is a calibration image, used to estimate the equilibrium magnetization of blood.</p></td>
</tr>
<tr class="row-odd"><td><p>deltam</p></td>
<td><p>The deltaM image is a perfusion-weighted image, obtained by the subtraction of <code class="docutils literal notranslate"><span class="pre">control</span></code> - <code class="docutils literal notranslate"><span class="pre">label</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>cbf</p></td>
<td><p>The cerebral blood flow (CBF) image is produced by dividing the deltaM by the M0, quantified into <code class="docutils literal notranslate"><span class="pre">mL/100g/min</span></code> (See also <a class="reference external" href="https://doi.org/10.1002/mrm.25197">doi:10.1002/mrm.25197</a>).</p></td>
</tr>
</tbody>
</table>
<p>If the <code class="docutils literal notranslate"><span class="pre">control</span></code> and <code class="docutils literal notranslate"><span class="pre">label</span></code> images are not available,
their derivative <code class="docutils literal notranslate"><span class="pre">deltam</span></code> should be stored within the <code class="docutils literal notranslate"><span class="pre">*_asl.nii[.gz]</span></code>
and specified in the <code class="docutils literal notranslate"><span class="pre">*_aslcontext.tsv</span></code> instead.
If the <code class="docutils literal notranslate"><span class="pre">deltam</span></code> is not available,
<code class="docutils literal notranslate"><span class="pre">cbf</span></code> should be stored within the <code class="docutils literal notranslate"><span class="pre">*_asl.nii[.gz]</span></code> and specified in the <code class="docutils literal notranslate"><span class="pre">*_aslcontext.tsv</span></code>.
When <code class="docutils literal notranslate"><span class="pre">cbf</span></code> is stored within the <code class="docutils literal notranslate"><span class="pre">*_asl.nii[.gz]</span></code>,
its units need to be specified in the <code class="docutils literal notranslate"><span class="pre">*_asl.json</span></code> as well.
Note that the raw images, including the <code class="docutils literal notranslate"><span class="pre">m0scan</span></code>, may also be used for quality control.
See <a class="reference external" href="../99-appendices/12-arterial-spin-labeling.md#_aslcontexttsv-three-possible-cases">Appendix XII - ASL</a> for examples of the three possible cases, in order of decreasing preference.</p>
</div>
<div class="section" id="scaling">
<h3>Scaling<a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">*_asl.nii.gz</span></code> and <code class="docutils literal notranslate"><span class="pre">*_m0scan.nii.gz</span></code> should contain appropriately scaled data, and no additional scaling factors are allowed other than the scale slope in the respective
NIfTI headers.</p>
</div>
<div class="section" id="m0">
<h3>M0<a class="headerlink" href="#m0" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">m0scan</span></code> can either be stored inside the 4D ASL time-series NIfTI file
or as a separate NIfTI file,
depending on whether it was acquired within the ASL time-series or as a separate scan.
These and other M0 options are specified in the REQUIRED <code class="docutils literal notranslate"><span class="pre">M0Type</span></code> field of the <code class="docutils literal notranslate"><span class="pre">*_asl.json</span></code> file.
It can also be stored under <code class="docutils literal notranslate"><span class="pre">fmap/sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_ce-&lt;label&gt;]_dir-&lt;label&gt;[_run-&lt;index&gt;]_m0scan.nii[.gz]</span></code>,
when the <a class="reference external" href="#case-4-multiple-phase-encoded-directions-pepolar">pepolar approach</a> is used.</p>
</div>
<div class="section" id="asl-json-file">
<h3><code class="docutils literal notranslate"><span class="pre">*_asl.json</span></code> file<a class="headerlink" href="#asl-json-file" title="Permalink to this headline">¶</a></h3>
<p>Depending on the method used for ASL acquisition ((P)CASL or PASL)
different metadata fields are applicable.
Additionally, some common metadata fields are REQUIRED for the <code class="docutils literal notranslate"><span class="pre">*_asl.json</span></code>:
<code class="docutils literal notranslate"><span class="pre">MagneticFieldStrength</span></code>, <code class="docutils literal notranslate"><span class="pre">MRAcquisitionType</span></code>, <code class="docutils literal notranslate"><span class="pre">EchoTime</span></code>,
<code class="docutils literal notranslate"><span class="pre">SliceTiming</span></code> in case <code class="docutils literal notranslate"><span class="pre">MRAcquisitionType</span></code> is defined as 2D,
<code class="docutils literal notranslate"><span class="pre">RepetitionTimePreparation</span></code>, and <code class="docutils literal notranslate"><span class="pre">FlipAngle</span></code> in case <code class="docutils literal notranslate"><span class="pre">LookLocker</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.
See <a class="reference external" href="../99-appendices/12-arterial-spin-labeling.md#summary-image-of-the-most-common-asl-sequences">Appendix XII - ASL</a> for more information on the most common ASL sequences.</p>
<div class="section" id="common-metadata-fields-applicable-to-both-p-casl-and-pasl">
<h4>Common metadata fields applicable to both (P)CASL and PASL<a class="headerlink" href="#common-metadata-fields-applicable-to-both-p-casl-and-pasl" title="Permalink to this headline">¶</a></h4>
<p></p>
</div>
<div class="section" id="p-casl-specific-metadata-fields">
<h4>(P)CASL-specific metadata fields<a class="headerlink" href="#p-casl-specific-metadata-fields" title="Permalink to this headline">¶</a></h4>
<p>These fields can only be used when <code class="docutils literal notranslate"><span class="pre">ArterialSpinLabelingType</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;CASL&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;PCASL&quot;</span></code>. See <a class="reference external" href="../99-appendices/12-arterial-spin-labeling.md#pcasl-sequence">Appendix XII - ASL</a> for more information on the (P)CASL sequence and the Labeling Pulse fields.</p>
<p></p>
</div>
<div class="section" id="pasl-specific-metadata-fields">
<h4>PASL-specific metadata fields<a class="headerlink" href="#pasl-specific-metadata-fields" title="Permalink to this headline">¶</a></h4>
<p>These fields can only be used when <code class="docutils literal notranslate"><span class="pre">ArterialSpinLabelingType</span></code> is <code class="docutils literal notranslate"><span class="pre">PASL</span></code>. See <a class="reference external" href="../99-appendices/12-arterial-spin-labeling.md#pasl-sequence">Appendix XII - ASL</a> for more information on the PASL sequence and the BolusCutOff fields.</p>
<p></p>
</div>
</div>
<div class="section" id="m0scan-metadata-fields">
<h3><code class="docutils literal notranslate"><span class="pre">m0scan</span></code> metadata fields<a class="headerlink" href="#m0scan-metadata-fields" title="Permalink to this headline">¶</a></h3>
<p>Some common metadata fields are REQUIRED for the <code class="docutils literal notranslate"><span class="pre">*_m0scan.json</span></code>: <code class="docutils literal notranslate"><span class="pre">EchoTime</span></code>, <code class="docutils literal notranslate"><span class="pre">RepetitionTimePreparation</span></code>, and <code class="docutils literal notranslate"><span class="pre">FlipAngle</span></code> in case <code class="docutils literal notranslate"><span class="pre">LookLocker</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p></p>
<p>The following table recapitulates the ASL field dependencies. If Source field (column 1) contains the Value specified in column 2, then the Requirements in column 4 are
imposed on the Dependent fields in column 3. See <a class="reference external" href="../99-appendices/12-arterial-spin-labeling.md#flowchart-based-on-dependency-table">Appendix XII</a> for this information in the
form of flowcharts.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Source field</strong></p></th>
<th class="head"><p><strong>Value</strong></p></th>
<th class="head"><p><strong>Dependent field</strong></p></th>
<th class="head"><p><strong>Requirements</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MRAcquisitionType</p></td>
<td><p>2D / 3D</p></td>
<td><p>SliceTiming</p></td>
<td><p>[X] / []</p></td>
</tr>
<tr class="row-odd"><td><p>LookLocker</p></td>
<td><p>true</p></td>
<td><p>FlipAngle</p></td>
<td><p>[X]</p></td>
</tr>
<tr class="row-even"><td><p>ArterialSpinLabelingType</p></td>
<td><p>PCASL</p></td>
<td><p>LabelingDuration</p></td>
<td><p>[X]</p></td>
</tr>
<tr class="row-odd"><td><p>ArterialSpinLabelingType</p></td>
<td><p>PASL</p></td>
<td><p>BolusCutOffFlag</p></td>
<td><p>[X]</p></td>
</tr>
<tr class="row-even"><td><p>BolusCutOffFlag</p></td>
<td><p>true / false</p></td>
<td><p>BolusCutOffDelayTime</p></td>
<td><p>[X] / []</p></td>
</tr>
<tr class="row-odd"><td><p>BolusCutOffFlag</p></td>
<td><p>true / false</p></td>
<td><p>BolusCutOffTechnique</p></td>
<td><p>[X] / []</p></td>
</tr>
<tr class="row-even"><td><p>M0Type</p></td>
<td><p>Separate</p></td>
<td><p>*/perf/</p></td>
<td><p>contains <code class="docutils literal notranslate"><span class="pre">*_m0scan.nii[.gz]</span></code> and <code class="docutils literal notranslate"><span class="pre">*_m0scan.json</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>M0Type</p></td>
<td><p>Included</p></td>
<td><p>*_aslcontext.tsv</p></td>
<td><p>contains m0scan</p></td>
</tr>
<tr class="row-even"><td><p>M0Type</p></td>
<td><p>Estimate</p></td>
<td><p>M0Estimate</p></td>
<td><p>[X]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">*_aslcontext.tsv</span></code></p></td>
<td><p>cbf</p></td>
<td><p>Units</p></td>
<td><p>[X]</p></td>
</tr>
</tbody>
</table>
<p><strong>Legend</strong></p>
<ul class="simple">
<li><p>[ X ] –&gt; MUST be defined</p></li>
<li><p>[   ] –&gt; MUST NOT be defined</p></li>
</ul>
</div>
</div>
<div class="section" id="fieldmap-data">
<h2>Fieldmap data<a class="headerlink" href="#fieldmap-data" title="Permalink to this headline">¶</a></h2>
<p>Data acquired to correct for <em>B<sub>0</sub></em> inhomogeneities can come in different forms.
The current version of this standard considers four different scenarios:</p>
<ol class="simple">
<li><p><a class="reference external" href="#case-1-phase-difference-map-and-at-least-one-magnitude-image">Phase-difference map</a></p></li>
<li><p><a class="reference external" href="#case-2-two-phase-maps-and-two-magnitude-images">Two phase maps</a></p></li>
<li><p><a class="reference external" href="#case-3-direct-field-mapping">Direct <em>field mapping</em></a></p></li>
<li><p><a class="reference external" href="#case-4-multiple-phase-encoded-directions-pepolar">“<em>PEpolar</em>” fieldmaps</a></p></li>
</ol>
<p>These four different types of field mapping strategies can be encoded
using the following image types:</p>
<p></p>
<p>Two OPTIONAL entities, following more general rules of the specification,
are allowed across all the four scenarios:</p>
<ul class="simple">
<li><p>The OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#run"><code class="docutils literal notranslate"><span class="pre">run-&lt;index&gt;</span></code></a> key/value pair corresponds to a one-based index
to distinguish multiple fieldmaps with the same parameters.</p></li>
<li><p>The OPTIONAL <a class="reference external" href="../99-appendices/09-entities.md#acq"><code class="docutils literal notranslate"><span class="pre">acq-&lt;label&gt;</span></code></a> key/value pair corresponds to a custom label
the user may use to distinguish different set of parameters.</p></li>
</ul>
<div class="section" id="expressing-the-mr-protocol-intent-for-fieldmaps">
<h3>Expressing the MR protocol intent for fieldmaps<a class="headerlink" href="#expressing-the-mr-protocol-intent-for-fieldmaps" title="Permalink to this headline">¶</a></h3>
<p>Fieldmaps are typically acquired with the purpose of correcting one or more EPI
scans under <code class="docutils literal notranslate"><span class="pre">dwi/</span></code>, <code class="docutils literal notranslate"><span class="pre">func/</span></code>, or <code class="docutils literal notranslate"><span class="pre">perf/</span></code> for distortions derived from <em>B<sub>0</sub></em>
nonuniformity.</p>
<div class="section" id="using-b0fieldidentifier-metadata">
<h4>Using <code class="docutils literal notranslate"><span class="pre">B0FieldIdentifier</span></code> metadata<a class="headerlink" href="#using-b0fieldidentifier-metadata" title="Permalink to this headline">¶</a></h4>
<p>The general purpose <a class="reference external" href="#echo-planar-imaging-and-b0-mapping"><code class="docutils literal notranslate"><span class="pre">B0FieldIdentifier</span></code> MRI metadata</a>
is RECOMMENDED for the prescription of the <em>B<sub>0</sub></em> field estimation intent of the
original acquisition protocol.
<code class="docutils literal notranslate"><span class="pre">B0FieldIdentifier</span></code> and <code class="docutils literal notranslate"><span class="pre">B0FieldSource</span></code> duplicate the capabilities of
the original <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> approach (see below), while permitting more
complex use cases.
It is RECOMMENDED to use both approaches to maintain compatibility with
tools that support older datasets.</p>
</div>
<div class="section" id="using-intendedfor-metadata">
<h4>Using <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> metadata<a class="headerlink" href="#using-intendedfor-metadata" title="Permalink to this headline">¶</a></h4>
<p>Fieldmap data MAY be linked to the specific scan(s) it was acquired for by
filling the <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> field in the corresponding JSON file.</p>
<p></p>
<p>For example:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;IntendedFor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ses-pre/func/sub-01_ses-pre_task-motor_run-1_bold.nii.gz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s2">&quot;ses-pre/func/sub-01_ses-pre_task-motor_run-2_bold.nii.gz&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="types-of-fieldmaps">
<h3>Types of fieldmaps<a class="headerlink" href="#types-of-fieldmaps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="case-1-phase-difference-map-and-at-least-one-magnitude-image">
<h4>Case 1: Phase-difference map and at least one magnitude image<a class="headerlink" href="#case-1-phase-difference-map-and-at-least-one-magnitude-image" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/bids-standard/bids-examples">Example datasets</a>
containing that type of fieldmap can be found here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/7t_trt"><code class="docutils literal notranslate"><span class="pre">7t_trt</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/genetics_ukbb"><code class="docutils literal notranslate"><span class="pre">genetics_ukbb</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/ds000117"><code class="docutils literal notranslate"><span class="pre">ds000117</span></code></a></p></li>
</ul>
<p>where
the REQUIRED <code class="docutils literal notranslate"><span class="pre">_phasediff</span></code> image corresponds to the phase-drift map between echo times,
the REQUIRED <code class="docutils literal notranslate"><span class="pre">_magnitude1</span></code> image corresponds to the shorter echo time, and
the OPTIONAL <code class="docutils literal notranslate"><span class="pre">_magnitude2</span></code> image to the longer echo time.</p>
<p>Required fields:</p>
<p></p>
<p>In this particular case, the sidecar JSON file
<code class="docutils literal notranslate"><span class="pre">sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phasediff.json</span></code>
MUST define the time of two echos used to map the phase and finally calculate
the phase-difference map.
For example:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;EchoTime1&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00600</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;EchoTime2&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00746</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;B0FieldIdentifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;phasediff_fmap0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="case-2-two-phase-maps-and-two-magnitude-images">
<h4>Case 2: Two phase maps and two magnitude images<a class="headerlink" href="#case-2-two-phase-maps-and-two-magnitude-images" title="Permalink to this headline">¶</a></h4>
<p>Similar to case 1, but instead of a precomputed phase-difference map, two
separate phase images and two magnitude images corresponding to first and
second echos are available.</p>
<p>Required fields:</p>
<p></p>
<p>Each phase map has a corresponding sidecar JSON file to specify its corresponding <code class="docutils literal notranslate"><span class="pre">EchoTime</span></code>.
For example, <code class="docutils literal notranslate"><span class="pre">sub-&lt;label&gt;[_ses-&lt;label&gt;][_acq-&lt;label&gt;][_run-&lt;index&gt;]_phase2.json</span></code> may read:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;EchoTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00746</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;B0FieldIdentifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;phases_fmap0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="case-3-direct-field-mapping">
<h4>Case 3: Direct <em>field mapping</em><a class="headerlink" href="#case-3-direct-field-mapping" title="Permalink to this headline">¶</a></h4>
<p>In some cases (for example GE), the scanner software will directly reconstruct a
<em>B<sub>0</sub></em> field map along with a magnitude image used for anatomical reference.</p>
<p>Required fields:</p>
<p></p>
<p>For example:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;Units&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rad/s&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;IntendedFor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;func/sub-01_task-motor_bold.nii.gz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;B0FieldIdentifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b0map_fmap0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>See <a class="reference external" href="#using-intendedfor-metadata">Using <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> metadata</a>
for details on the <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> field.</p>
</div>
<div class="section" id="case-4-multiple-phase-encoded-directions-pepolar">
<h4>Case 4: Multiple phase encoded directions (“pepolar”)<a class="headerlink" href="#case-4-multiple-phase-encoded-directions-pepolar" title="Permalink to this headline">¶</a></h4>
<p>An <a class="reference external" href="https://github.com/bids-standard/bids-examples">example dataset</a>
containing that type of fieldmap can be found here:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/bids-standard/bids-examples/tree/master/ieeg_visual_multimodal"><code class="docutils literal notranslate"><span class="pre">ieeg_visual_multimodal</span></code></a></p></li>
</ul>
<p>The phase-encoding polarity (PEpolar) technique combines two or more Spin Echo
EPI scans with different phase encoding directions to estimate the distortion
map corresponding to the nonuniformities of the <em>B<sub>0</sub></em> field.
These <code class="docutils literal notranslate"><span class="pre">*_epi.nii[.gz]</span></code> - or <code class="docutils literal notranslate"><span class="pre">*_m0scan.nii[.gz]</span></code> for arterial spin labeling perfusion data - files can be 3D or 4D –
in the latter case, all timepoints share the same scanning parameters.
Examples of software tools using these kinds of images are FSL TOPUP,
AFNI <code class="docutils literal notranslate"><span class="pre">3dqwarp</span></code>, and SPM.</p>
<p>The <a class="reference external" href="../99-appendices/09-entities.md#dir"><code class="docutils literal notranslate"><span class="pre">dir-&lt;label&gt;</span></code></a> entity is REQUIRED
for these files.
This key-value pair MUST be used in addition to
the REQUIRED <code class="docutils literal notranslate"><span class="pre">PhaseEncodingDirection</span></code> metadata field
(see <a class="reference external" href="../02-common-principles.md#file-name-structure">File name structure</a>).</p>
<p>Required fields:</p>
<p></p>
<p>For example:</p>
<div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;PhaseEncodingDirection&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;j-&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;TotalReadoutTime&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.095</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;IntendedFor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;func/sub-01_task-motor_bold.nii.gz&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="nt">&quot;B0FieldIdentifier&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pepolar_fmap0&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>See <a class="reference external" href="#using-intendedfor-metadata">Using <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> metadata</a>
for details on the <code class="docutils literal notranslate"><span class="pre">IntendedFor</span></code> field.</p>
<p>As for other EPI sequences, these field mapping sequences may have any of the
<a class="reference external" href="#in-plane-spatial-encoding">in-plane spatial encoding</a> metadata keys.
However, please note that <code class="docutils literal notranslate"><span class="pre">PhaseEncodingDirection</span></code> and <code class="docutils literal notranslate"><span class="pre">TotalReadoutTime</span></code> keys
are REQUIRED for these field mapping sequences.</p>
<!-- Link Definitions --></div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./src/04-modality-specific-files"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../04-modality-specific-files.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Modality specific files</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="02-magnetoencephalography.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Magnetoencephalography</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By The BIDS Community<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>